<% layout('/layouts/boilerplate') -%>

<div class="listing-detail">
    <a href="/listings" class="back-button">
        <i class="fa-solid fa-arrow-left"></i>
        Back to Listings
    </a>
    
    <h2><%= listing.title %></h2>
    
    <div class="listing-image-section">
        <img src="<%= listing.image.url %>" alt="<%= listing.title %>"/>
    </div>

    <div class="listing-details">
        <h3>Property Details</h3>
        <div class="detail-item">
            <span class="detail-label">Price:</span>
            <span class="detail-value price">â‚¹ <%= listing.price.toLocaleString("en-IN") %> / night</span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Location:</span>
            <span class="detail-value"><%= listing.location %></span>
        </div>
        <div class="detail-item">
            <span class="detail-label">Country:</span>
            <span class="detail-value"><%= listing.country %></span>
        </div>
    </div>

    <div class="listing-description">
        <h4>About this property</h4>
        <p><%= listing.description %></p>
    </div>

    <div class="listing-actions">
        <form action="/listings/<%= listing._id %>/edit" method="get">
            <button type="submit">
                <i class="fa-solid fa-pen-to-square"></i>
                Edit Listing
            </button>
        </form>
        <form action="/listings/<%= listing._id %>?_method=DELETE" method="post" onsubmit="return confirm('Are you sure you want to delete this listing? This action cannot be undone.');">
            <button type="submit">
                <i class="fa-solid fa-trash"></i>
                Delete Listing
            </button>
        </form>
    </div>
</div>